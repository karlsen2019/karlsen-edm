# 04-RocketMQ入门机器使用（一）

* mybatis逆向工程
* tk-mybatis
  * basemapper
    * 动态表名 **分库分表**
* 分库
  * 冗余
  * mycat
  * 跨库查询
  * 物化视图(oracle)
    * 两张表的组合体
  * 分表
    * 水平分表
      * 日期
      * 存储过程 创建下一天表
      * hbase 历史数据
    * 垂直分表
      * 重构
* 固定模式
  * facade
* 面向restful
* dubbo
* swagger
* 生产者
  1. 将外部的数据转换实体模型，存储到数据库中 **数据落地**
  2. 将消息投递到队列中去
  3. update 将当前投递消息的状态更改为 **已发送**
  * 可靠性投递，最终一致
    * 结合数据库
    * 保证生产者可靠性投递
    * 保证消费者，唯一消费
  * 注意
    * 1、2不可能在一个事务中
    * 投递失败
      * 重投
      * 重投次数 **计数器** 
      * redis返回失败
      * version、count
  * status
    * 0 暂存
    * 1 已发送
    * 2 已消费
    * 3 消费失败 **最终失败** 
* 消费者
  * 去重、幂等消费
  * 最终一致性  
  * 乐观锁
  * 去重机制
    * 小表 **去重表**
    * 大表

## 本节任务

* tk-mybatis实现增删改查
* 分页
  * pageheleper
* 字典表查询 
* 导入数据库表
* 逆向生成实体、mapper、mapping